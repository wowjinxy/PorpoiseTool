# PorpoiseTool

PorpoiseTool is a Python-based transpiler that converts GameCube PowerPC assembly
into portable C source code. It is primarily intended to work with assembly files
generated by the [Decomp Tool Kit (DTK)](https://github.com/dtk-mirror), turning
each opcode into equivalent C statements.

The project includes a small GameCube run-time environment (`gc_env.c` and
`gc_env.h`) that emulates registers and memory. Generated C files rely on this
environment but do not depend on any platform-specific features.

## Features

- **Modular opcode handlers** – Every PowerPC opcode has a handler inside the
  `opcodes/` directory that emits the corresponding C logic.
- **Automatic parsing** – The transpiler reads DTK assembly output, detects
  functions and data sections, and generates matching `.c` and `.h` files.
- **Portable output** – The resulting code uses only standard C and the
  provided GameCube environment, so it can be compiled on any platform.

## Usage

```bash
python PorpoiseTool.py <assembly_file> [opcodes_dir]
```

- `assembly_file` – DTK generated `.s` file to transpile.
- `opcodes_dir` – Optional path to the directory containing opcode handlers
  (defaults to `opcodes/`).

The script outputs `<assembly_file>.c` and `<assembly_file>.h` in the same
location as the input file.

### Example

```bash
python PorpoiseTool.py auto_00_80003100_init.s
```

This command produces `auto_00_80003100_init.c` and
`auto_00_80003100_init.h` next to the original assembly file.

## Extending

Opcode behavior is implemented via individual Python modules in `opcodes/`. Each
module exposes a list of supported opcode names and a `handle()` function that
returns C code snippets. To add support for an opcode, create a new module with
those elements and place it in the `opcodes/` directory.

## License

This repository does not currently include a license file.  See the repository
history or contact the original author for more information.
